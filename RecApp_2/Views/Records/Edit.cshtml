@model Tuple<RecApp_2.Models.Record, RecApp_2.Models.TratamientoPaciente>
@{

    ViewBag.Title = "Especialidades Odontológicas | Expediente Clínico";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<head>
    <!--Funciones del JQuery / JavaScript expediente. -->
    <script>


        $(document).ready(function () {

            if(location.hash) {
                var hash = window.location.hash;
                $('.nav-tabs a[href="'+ hash +'"]').tab('show');
            }
            //Cambiar background color de los dientes
            var myArray = [];
            @foreach (var link in ViewBag.ListaIdDientes)
                    {
                        @:myArray.push("@link");
                                                                                                                    }
            for (index = 0; index < myArray.length; ++index) {
                $("[value="+myArray[index]+"]").css("background-color", "#5cb85c");
            }

            //$("#verFacturaInput").addClass("btn btn-primary");
            $(".btn_p").css("background-color", "#46a9be");
            $(".btn_d").css("background-color", "#d9534f");
            $(".btn_w").css("background-color", "#f0ad4e");

            var bandera = @TempData["AgregoTratamiento"].ToString();
            var tratamientoEditando = @TempData["tratamientoEditando"].ToString();
            var mayorEdad = @TempData["mayorEdad"].ToString();
            var mensajeError = @TempData["MensajeErrorAgregarTratamiento"].ToString();

            if (mensajeError == true) {
                $("#mensajeError").html('Tratamiento agregado correctamente.');

            }else {
                $('#mensajeError').css("display","none");
            }
            if (bandera == true)
            {
                $('.nav-tabs a[href="#tab4default"]').tab('show');
            }
            /*Cuando esta editando el tratameindo del paciente*/
            if (tratamientoEditando == true)
            {
                $('.nav-tabs a[href="#tab5default"]').tab('show');
            }

            /*para mostrar encargado*/
            if (mayorEdad == true) {
                $('#encargado').css("display","none");
                $('#divMenorEdad').css("display","none");

            }else {
                $('#encargado').css("display","block");
                $('#divMenorEdad').css("display","block");
                $('#lblMenorEdad').html('Sí');
                $('#MenorEdadH').val(1);
            }

            //Configuración DateRangePicker
            moment.locale('es', {
                months : "Enero,Febrero,Marzo,Abril,Mayo,Junio,Julio,Agosto,Septiembre,Octubre,Noviembre,Diciembre".split(","),
                monthsShort : "Ene_Feb_Mar_Abr_May_Jun_Jul_Ago_Sep_Oct_Nov_Dec".split("_"),
                weekdays : "Domingo,Lunes,Martes,Miercoles,Jueves,Viernes,Sabado".split(","),
                weekdaysShort : "dom._lun._mar._mie._jue._vie._sab.".split("_"),
                weekdaysMin : "Do_Lu_Ma_Mi_Ju_Vi_Sa".split("_"),
                longDateFormat : {
                    LT : "HH:mm",
                    LTS : "HH:mm:ss",
                    L : "DD/MM/YYYY",
                    LL : "D MMMM YYYY",
                    LLL : "D MMMM YYYY LT",
                    LLLL : "dddd D MMMM YYYY LT"
                }}
            );

            $(".js-example-basic-single").select2();

            $("#btnVerTratamiento").click(function() {
                $('.nav-tabs a[href="#tab5default"]').tab('show');
            });

            $('#fechaNacimiento').removeAttr("data-val-date");
            var fecha = @Html.Raw(Json.Encode(Model.Item1.FechaNacimiento));
            var pattern = /Date\(([^)]+)\)/;
            var results = pattern.exec(fecha);
            var dt = new Date(parseFloat(results[1]));
            var month = dt.getMonth() + 1;
            if (month<10) {
                month = "0"+month;
            }
            fecha =  dt.getFullYear()+"-"+(month) + "-" + dt.getDate();

            document.getElementById('fechaNacimiento').value = fecha;
            if (fecha) {
                var today = new Date();
                var dd = Number(today.getDate());
                var mm = Number(today.getMonth() + 1);
                var yyyy = Number(today.getFullYear());

                var myBDM = Number(fecha.split("-")[1])
                var myBDD = Number(fecha.split("-")[2])
                var myBDY = Number(fecha.split("-")[0])
                var age = yyyy - myBDY;

                if (mm < myBDM) {
                    age = age - 1;
                }
                else if (mm == myBDM && dd < myBDD) {
                    age = age - 1;
                }

                $('#EdadH').val(age);
                $('#lblEdad').html(age + ' años');
                document.getElementById('divEdad').style.display = 'block';
            } else {
                document.getElementById('encargado').style.display = 'none';
                document.getElementById('divMenorEdad').style.display = 'none';
                document.getElementById('divEdad').style.display = 'none';
            }
        });


        //Funciones  JavaScript
        function mostrarEncargado() {
            var fecha = document.getElementById("fechaNacimiento").value;
            if (fecha) {
                var today = new Date();
                var dd = Number(today.getDate());
                var mm = Number(today.getMonth() + 1);
                var yyyy = Number(today.getFullYear());

                var myBDM = Number(fecha.split("-")[1])
                var myBDD = Number(fecha.split("-")[2])
                var myBDY = Number(fecha.split("-")[0])
                var age = yyyy - myBDY;

                if (mm < myBDM) {
                    age = age - 1;
                }
                else if (mm == myBDM && dd < myBDD) {
                    age = age - 1;
                }

                if (age < 18) {
                    document.getElementById('encargado').style.display = 'block';
                    document.getElementById('divMenorEdad').style.display = 'block';
                    $('#lblMenorEdad').html('Sí');
                    $('#MenorEdadH').val(1);

                } else {

                    $('#MenorEdadH').val(0);
                    document.getElementById('encargado').style.display = 'none';
                    document.getElementById('divMenorEdad').style.display = 'block';
                    $('#lblMenorEdad').html('No');

                }

                $('#EdadH').val(age);
                $('#lblEdad').html(age + ' años');
                document.getElementById('divEdad').style.display = 'block';
            } else {
                document.getElementById('encargado').style.display = 'none';
                document.getElementById('divMenorEdad').style.display = 'none';
                document.getElementById('divEdad').style.display = 'none';
            }

        }

        function cambiarOdontograma() {

            if(document.getElementById('decidua').checked){
                document.getElementById('ninoArriba').style.display = 'block';
                document.getElementById('ninoAbajo').style.display = 'block';
                document.getElementById('adultoArriba').style.display = 'none';
                document.getElementById('adultoAbajo').style.display = 'none';
            }
            else{
                document.getElementById('adultoArriba').style.display = 'block';
                document.getElementById('adultoAbajo').style.display = 'block';
                document.getElementById('ninoArriba').style.display = 'none';
                document.getElementById('ninoAbajo').style.display = 'none';
            }

        }

        function activarDiente() {
            var numDiente = document.getElementById("num").value;
        }

        function colocarTabOdontograma() {
            $('.nav-tabs a[href="#tabDefault4"]').tab('show');
        }

        function show_popup() {
            $("#popup").modal();
        }

        /*Mostrar los tratamientos asignados al diente*/
        function buttonClick(button){

            document.getElementById('IdDiente').value = button.value;
            document.getElementById('btnVerTratamiento').value = button.value;
            var idPaciente = @Html.Raw(Json.Encode(Model.Item1.id));
            document.getElementById('IdPaciente').value = idPaciente;

            $.ajax({
                url:'@Url.Action("GetTratamientosDiente", "Records")',
                type: 'GET',
                data: { idDiente: button.value, idPaciente_1: idPaciente },
                dataType: "json",
                success: function (response) {
                    if (response.success) {
                        $("#btnVerTratamiento").css("display", "inline");
                    } else {
                        $("#btnVerTratamiento").css("display", "none");
                    }
                },
                error: function (response) {
                    alert("error!");
                }

            });

        }

        //Ver detalle de la factura
        function buttonClickDetalleFactura(button){
            var idPaciente = @Html.Raw(Json.Encode(Model.Item1.id));
            var idPayment = button.value;
            $.ajax({
                url:'@Url.Action("PartialViewTratamientoPacienteFactura", "Records")',
                type: 'GET',
                data: { id_Payment: idPayment, id_Paciente:idPaciente},
                success: function (data) {
                    $(".custom_1").html(data)
                    $("#verFactura").modal('show')                
                },
                error: function (data) {
                    alert("error!"+ data);
                }
            });

        }
        //Ver PDF de tratamientos del paciente
        @*function GenerarPDF(button){     
            var _idPayment = $('#idPaymentPdf').val();
            $.ajax({
                url:'@Url.Action("SaveTratamientoPacientePdf", "Pdf")',
                type: 'GET',
                data: { IdPayment: _idPayment},
                success: function (data) {
                    window.open(data);
                },
                error: function (data) {
                    alert("error!"+ data);
                }
            });

        }*@

        
        // Ver detalles iniciar cierre de factura
        function buttonClickFacturar(button){
            var idPaciente = @Html.Raw(Json.Encode(Model.Item1.id));
            var idPayment = button.value;
            $.ajax({
                url:'@Url.Action("PartialViewFacturar", "Records")',
                type: 'GET',
                data: { id_Payment: idPayment, id_Paciente:idPaciente},
                success: function (data) {
                    $(".custom_2").html(data);
                    $("#Facturar").modal('show');
                },
                error: function (data) {
                    alert("Ocurrió un eror al cargar la Factura, por favor intente de nuevo."+ data);
                }
            });

        }


        function  buttonClickCerrarModalDetalleAbono(button){
            $("#DetalleAbono").modal('hide')
            window.location.hash = 'tab6default';
            window.location.reload();
        }


        //Aplicar abono
        function buttonClickAplicarAbonoFactura(button){
            var idRecord = @Html.Raw(Json.Encode(Model.Item1.id));
            var idPayment =  $("#idFacturaAbono").val();

            if ($("#montoAbono").val() != '') {
                var montoAbono = parseFloat($("#montoAbono").val());
            }else {
                var montoAbono = 0;
            }
            $.ajax({
                url:'@Url.Action("PartialViewAplicarAbonoFactura", "Records")',
                type: 'GET',
                data: { id_Payment: idPayment, id_Record:idRecord, monto_Abono: montoAbono},
                success: function (data, status, xhr) {

                    //var sourceDomain = request.Headers["Origin"];
                    var value = xhr.getResponseHeader('Error');
                    if (value!= '5') {
                        $("#AbonarFactura").modal('hide');
                        $('body').removeClass('modal-open');
                        $('.modal-backdrop').remove();
                        $(".custom_5").html(data);
                        $("#DetalleAbono").modal('show');
                    }else {
                        $(".custom_4").html(data);
                    }



                    // $("#AbonarFactura").modal('show');


                },
                error: function (data) {
                    alert("Ocurrió un eror al aplicar el abono, por favor intente de nuevo."+ data);
                }
            });

        }


        //Ver detalle de abonos por factura
        function buttonClickDetalleAbonosPorFactura(button){
            var idPayment =  button.value;
            $.ajax({
                url:'@Url.Action("PartialViewPaymentDetailsByPayment", "Records")',
                type: 'GET',
                data: { id_Payment: idPayment},
                success: function (data) {
                    $(".custom_6").html(data);
                    $("#DetalleAbonosPorFactura").modal('show');
                },
                error: function (data) {
                    alert("Ocurrió un eror al mostrar los abonos de la factura, por favor intente de nuevo."+ data);
                }
            });

        }

        // Ver detalles para Cerrar la factura
        function buttonClickCerrarFactura(button){
            var idPaciente = @Html.Raw(Json.Encode(Model.Item1.id));

            if ($("#montoAdic").val() != '') {
                var montoAdic = parseFloat($("#montoAdic").val());
            }else {
                var montoAdic = 0;
            }


            $.ajax({
                url:'@Url.Action("PartialViewCerrarFactura", "Records")',
                type: 'GET',
                data: {  id_Paciente:idPaciente, montoAdicional:montoAdic},
                success: function (data) {
                    $(".custom_3").html(data);
                    $("#Facturar").modal('hide');
                    $("#DetalleCierreFactura").modal('show');
                    window.location.hash = 'tab6default';
                    window.location.reload();


                },
                error: function (data) {
                    alert("Ocurrió un eror al cambiar de estaado la Factura, por favor intente de nuevo."+ data);
                }
            });

        }



        // Ver realizar abono a factura
        function buttonClickAbonarFactura(button){
            showProgress();
            var idFactura = button.value;           
            $.ajax({
                url:'@Url.Action("PartialViewAbonar", "Records")',
                type: 'GET',
                data: {  id_Factura:idFactura},
                success: function (data) {
                    $(".custom_4").html(data);
                    $("#AbonarFactura").modal('show');
                    hideProgress();
                    $('button[id^="Abonar"]').removeAttr("disabled");
                },
                error: function (data) {
                    alert("Ocurrió un eror al mostrar la información para realizar el abono, por favor intente de nuevo."+ data);
                    hideProgress();
                    //  $("button[type=button]").removeAttr("disabled");
                }
            });

        }



        function FiltrarTratamientoDiente(button) {
            var idDiente =button.value;
            var idPaciente = @Html.Raw(Json.Encode(Model.Item1.id));
            $.ajax({
                url:'@Url.Action("FiltrarTratamientosPorDiente", "Records")',
                type: 'GET',
                data: { idDiente: button.value, idPaciente_1: idPaciente },
                success: function (data) {
                    $('#PartialViewTratamientosPaciente').html(data)
                },
                error: function (data) {
                    alert("error!"+ data);
                }

            });
        }

        function FiltrarTratamientoPorFecha() {
            var startDate = $('#reportrange').data('daterangepicker').startDate.format('DD/MM/YYYY');
            var endDate = $('#reportrange').data('daterangepicker').endDate.format('DD/MM/YYYY');
            var idPaciente = @Html.Raw(Json.Encode(Model.Item1.id));
            $.ajax({
                url:'@Url.Action("FiltrarTratamientosPorFecha", "Records")',
                type: 'GET',
                data: { fechaInicio: startDate, fechaFin: endDate, idPaciente_1: idPaciente },
                success: function (data) {
                    $('#PartialViewTratamientosPaciente').html(data)
                },
                error: function (data) {
                    alert("error!"+ data);
                }

            });
        }

        function FiltrarTratamientoPorTratamiento() {
            var idTratamiento = $('#drpTratamientoFiltro').val();
            var idPaciente = @Html.Raw(Json.Encode(Model.Item1.id));
            $.ajax({
                url:'@Url.Action("FiltrarTratamientosPorTratamiento", "Records")',
                type: 'GET',
                data: { idTratamiento_1: idTratamiento, idPaciente_1: idPaciente },
                success: function (data) {
                    $('#PartialViewTratamientosPaciente').html(data)
                },
                error: function (data) {
                    alert("error!"+ data);
                }
            });
        }


        function FiltrarTratamientoPorCaraDiente() {
            var idCara = $('#drpCarasDiente').val();
            var idPaciente = @Html.Raw(Json.Encode(Model.Item1.id));
            $.ajax({
                url:'@Url.Action("FiltrarTratamientosPorCaraDiente", "Records")',
                type: 'GET',
                data: { idCaraDiente_1: idCara, idPaciente_1: idPaciente },
                success: function (data) {
                    $('#PartialViewTratamientosPaciente').html(data)
                },
                error: function (data) {
                    alert("error!"+ data);
                }

            });
        }

        function FiltrarTratamientoPorDiente() {
            var idDiente_1 = Number($('#drpNoDiente').val());
            var idPaciente = @Html.Raw(Json.Encode(Model.Item1.id));
            $.ajax({
                url:'@Url.Action("FiltrarTratamientosPorDiente", "Records")',
                type: 'GET',
                data: { idDiente: idDiente_1, idPaciente_1: idPaciente },
                success: function (data) {
                    $('#PartialViewTratamientosPaciente').html(data)
                },
                error: function (data) {
                    alert("error!"+ data);
                }

            });
        }


        function FiltrarFacturaPorEstado() {
            var idEstado= Number($('#drpEstadoFactura').val());
            var idPaciente = @Html.Raw(Json.Encode(Model.Item1.id));
            $.ajax({
                url:'@Url.Action("FiltrarFacturaPorEstado", "Records")',
                type: 'GET',
                data: { id_Estado: idEstado, id_Paciente: idPaciente},
                success: function (data) {
                    $('#PartialViewPayments').html(data)
                },
                error: function (data) {
                    alert("error!"+ data);
                }

            });
        }

        $(function() {

            var start = moment().subtract(29, 'days');
            var end = moment();

            function cb(start, end) {
                $('#reportrange span').html(start.format('D/MM/YYYY') + ' - ' + end.format('D/MM/YYYY'));
            }

            $('#reportrange').daterangepicker({
                locale: {
                    format : "DD/MM/YYYY",
                    applyLabel: 'Aplicar',
                    buttonClasses: ['btn btn-primary'],
                    applyClass: 'btn-small btn-primary',
                    cancelLabel: "Cancelar",
                    fromLabel: "Desde",
                    toLabel: "Hasta",
                },
                showCustomRangeLabel: false,
                alwaysShowCalendars: true,
                startDate: start,
                endDate: end,
                ranges: {
                    'Hoy': [moment(), moment()],
                    'Ayer': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
                    'Últimos 7 días': [moment().subtract(6, 'days'), moment()],
                    'Últimos 30 días': [moment().subtract(29, 'days'), moment()],
                    'Este mes': [moment().startOf('month'), moment().endOf('month')],
                    'Mes anterior': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
                }
            }, cb);

            cb(start, end);

        });


        ///*Sumarizacion del Monto a pagar por factura*/
        function calculateSum() {

            var sum = 0;
            //iterate through each textboxes and add the values
            $(".txt").each(function() {

                //add only if the value is number
                if(!isNaN(this.value) && this.value.length!=0) {
                    sum += parseFloat(this.value);
                }

            });
            //.toFixed() method will roundoff the final sum to 2 decimal places
            $("#sum").html(sum.toFixed(2));
        }

        var spinnerVisible = false;
        function showProgress() {
            if (!spinnerVisible) {
                $("div#spinner").fadeIn("fast");
                spinnerVisible = true;
            }
        };
        function hideProgress() {
            if (spinnerVisible) {
                var spinner = $("div#spinner");
                spinner.stop();
                spinner.fadeOut("fast");
                spinnerVisible = false;
            }
        };

    </script>

    <meta charset="UTF-8">
    <title>Especialidades Odontológicas | Expediente Clínico</title>
    <meta name="description" content="Especialista Dental" />
    <meta name="keywords" content="Dentista, Heredia, Odontologa, Especialidades, Especialista" />

</head>
<body>
    <div class="container col-md-12 center-block">
        <div class="panel panel-primary">
            <div class='panel-heading'>
                <h4>Expediente #@Html.DisplayFor(model => model.Item1.Cedula)</h4>
            </div>
            <div class='panel-body'>


                @using (Html.BeginForm())
                {
                    @Html.AntiForgeryToken()

                    <div class="form-horizontal">

                        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                        @Html.HiddenFor(model => model.Item1.id)

                        <div class="panel with-nav-tabs panel-default">
                            <div class="panel-heading">
                                <ul class="nav nav-tabs">
                                    <li class="active"><a href="#tab1default" data-toggle="tab">Información Principal</a></li>
                                    <li><a href="#tab2default" data-toggle="tab">Datos Personales</a></li>
                                    <li><a href="#tab3default" data-toggle="tab">Condiciones Médicas / Enfermedades</a></li>
                                    <li><a href="#tab4default" data-toggle="tab">Odontograma</a></li>
                                    <li><a href="#tab5default" data-toggle="tab">Tratamientos Aplicados</a></li>
                                    <li><a href="#tab6default" data-toggle="tab">Cobros</a></li>
                                </ul>
                            </div>
                            <div class="panel-body">
                                <div class="tab-content">
                                    @*Detalles del paciente*@
                                    <div class="tab-pane active" id="tab1default">
                                        @if (TempData["MessageRegistroModificado"] != null)
                                        {
                                            <div class="alert alert-success">
                                                <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                                                <strong><label class="control-label center-block" id="mensajeErrorEditarExp">@TempData["MessageRegistroModificado"].ToString()</label></strong>
                                            </div>

                                        }
                                        <div class="row">
                                            <div class="col-md-5">
                                                <div class="media">
                                                    <a class="pull-left" href="#">
                                                        <img class="media-object dp img-circle" src="~/Images/MedicalRecords.png" style="width: 100px;height:100px;">
                                                    </a>
                                                    <div class="media-body">
                                                        <h4>
                                                            @Html.DisplayFor(model => model.Item1.Nombre)
                                                            @Html.DisplayFor(model => model.Item1.Apellido1)
                                                            @Html.DisplayFor(model => model.Item1.Apellido2)
                                                        </h4>
                                                        <h4>Cédula: @Html.DisplayFor(model => model.Item1.Cedula) </h4>
                                                        <hr style="margin:8px auto">

                                                        <span class="label label-info">Correo electrónico: @Html.DisplayFor(model => model.Item1.Email)</span>
                                                        <span class="label label-default">@Html.DisplayNameFor(model => model.Item1.Telefono1): @Html.DisplayFor(model => model.Item1.Telefono1)</span>
                                                        <span class="label label-default">@Html.DisplayNameFor(model => model.Item1.Telefono2): @Html.DisplayFor(model => model.Item1.Telefono2)</span>
                                                        <span class="label label-default">@Html.DisplayNameFor(model => model.Item1.FechaNacimiento):  @Html.DisplayFor(model => model.Item1.FechaNacimiento)</span>
                                                        <span class="label label-default">@Html.DisplayNameFor(model => model.Item1.Edad): @Html.DisplayFor(model => model.Item1.Edad)</span>
                                                    </div>
                                                </div>

                                            </div>
                                            <div class="col-md-7">
                                                <div class="panel with-nav-tabs panel-default">
                                                    <div class="panel-heading">
                                                        <ul class="nav nav-tabs">
                                                            <li class="active"><a href="#tab2default_2" data-toggle="tab">Información Personal</a></li>
                                                            @if (Model.Item1.Edad < 18)
                                                            {
                                                                <li><a href="#tab1default_1" data-toggle="tab">Datos del Encargado</a></li>
                                                            }

                                                            <li><a href="#tab4default_4" data-toggle="tab">Condición Médica</a></li>

                                                        </ul>
                                                    </div>
                                                    <div class="panel-body">
                                                        <div class="tab-content">
                                                            @if (Model.Item1.Edad < 18)
                                                            {
                                                                <div class="tab-pane fade" id="tab1default_1">

                                                                    <h3> </h3>
                                                                    <label>
                                                                        @Html.DisplayNameFor(model => model.Item1.NombreEncargado)
                                                                    </label>
                                                                    @Html.DisplayFor(model => model.Item1.NombreEncargado) @Html.DisplayFor(model => model.Item1.Apellido1Encargado) @Html.DisplayFor(model => model.Item1.Apellido2Encargado)
                                                                    <br />

                                                                </div>
                                                            }
                                                            <div class="tab-pane active" id="tab2default_2">
                                                                <div class="col-md-6">
                                                                    <h3> </h3>
                                                                    @if (Model.Item1.Edad < 18)
                                                                    {
                                                                        <label>
                                                                            @Html.DisplayNameFor(model => model.Item1.MenorEdad)
                                                                        </label>
                                                                        <br />
                                                                    }
                                                                    <label>
                                                                        @Html.DisplayNameFor(model => model.Item1.IdEstadoCivil)
                                                                    </label>

                                                                    @ViewBag.CivilStatus
                                                                    <br />
                                                                    <label>
                                                                        @Html.DisplayNameFor(model => model.Item1.Domicilio)
                                                                    </label>
                                                                    @Html.DisplayFor(model => model.Item1.Domicilio)
                                                                    <br />
                                                                    <label>
                                                                        @Html.DisplayNameFor(model => model.Item1.Profesion)
                                                                    </label>
                                                                    @Html.DisplayFor(model => model.Item1.Profesion)
                                                                    <br />
                                                                    <label>
                                                                        @Html.DisplayNameFor(model => model.Item1.ContactoEmergencia)
                                                                    </label>
                                                                    @Html.DisplayFor(model => model.Item1.ContactoEmergencia)
                                                                </div>
                                                            </div>

                                                            @*Tabla Condiciones Medicas*@
                                                            <div class="tab-pane fade" id="tab4default_4">
                                                                <div class="col-md-8 table-responsive">
                                                                    <h3> </h3>
                                                                    <table class="table table-responsive table-bordered" style="min-height:300px;">

                                                                        <tr>
                                                                            <td>
                                                                                @Html.DisplayNameFor(model => model.Item1.TratamientoMedico)
                                                                            </td>
                                                                            <td>
                                                                                @Html.DisplayFor(model => model.Item1.TratamientoMedico)
                                                                            </td>
                                                                            <td>
                                                                                @Html.DisplayNameFor(model => model.Item1.Medicamento)
                                                                            </td>
                                                                            <td>
                                                                                @Html.DisplayFor(model => model.Item1.Medicamento)
                                                                            </td>

                                                                        </tr>
                                                                        <tr>
                                                                            <td>
                                                                                @Html.DisplayNameFor(model => model.Item1.Diabetes)
                                                                            </td>
                                                                            <td>
                                                                                @Html.DisplayFor(model => model.Item1.Diabetes)
                                                                            </td>
                                                                            <td>
                                                                                @Html.DisplayNameFor(model => model.Item1.Artritis)
                                                                            </td>
                                                                            <td>
                                                                                @Html.DisplayFor(model => model.Item1.Artritis)
                                                                            </td>
                                                                        </tr>

                                                                        <tr>
                                                                            <td>@Html.DisplayNameFor(model => model.Item1.EnfermedadCardiaca)</td>
                                                                            <td>@Html.DisplayFor(model => model.Item1.EnfermedadCardiaca)</td>
                                                                            <td>@Html.DisplayNameFor(model => model.Item1.Hepatitis)</td>
                                                                            <td>@Html.DisplayFor(model => model.Item1.Hepatitis)</td>
                                                                        </tr>


                                                                        <tr>
                                                                            <td>@Html.DisplayNameFor(model => model.Item1.FiebreReumatica)</td>
                                                                            <td>@Html.DisplayFor(model => model.Item1.FiebreReumatica)</td>
                                                                            <td>@Html.DisplayNameFor(model => model.Item1.Ulcera)</td>
                                                                            <td>@Html.DisplayFor(model => model.Item1.Ulcera)</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td>@Html.DisplayNameFor(model => model.Item1.PresionAlta)</td>
                                                                            <td>@Html.DisplayFor(model => model.Item1.PresionAlta)</td>
                                                                            <td>@Html.DisplayNameFor(model => model.Item1.PresionBaja)</td>
                                                                            <td>@Html.DisplayFor(model => model.Item1.PresionBaja)</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td>@Html.DisplayNameFor(model => model.Item1.EnfermedadesNerviosas)</td>
                                                                            <td>@Html.DisplayFor(model => model.Item1.EnfermedadesNerviosas)</td>
                                                                            <td>@Html.DisplayNameFor(model => model.Item1.OtrasEnfermedades)</td>
                                                                            <td>@Html.DisplayFor(model => model.Item1.OtrasEnfermedades)</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td>@Html.DisplayNameFor(model => model.Item1.SangradoProlongado)</td>
                                                                            <td>@Html.DisplayFor(model => model.Item1.SangradoProlongado)</td>
                                                                            <td>@Html.DisplayNameFor(model => model.Item1.Desmayos)</td>
                                                                            <td>@Html.DisplayFor(model => model.Item1.Desmayos)</td>
                                                                        </tr>

                                                                        <tr>
                                                                            <td>@Html.DisplayNameFor(model => model.Item1.IntervencionQuirurgica)</td>
                                                                            <td>@Html.DisplayFor(model => model.Item1.IntervencionQuirurgica)</td>
                                                                            <td>@Html.DisplayNameFor(model => model.Item1.Aspirina)</td>
                                                                            <td>@Html.DisplayFor(model => model.Item1.Aspirina)</td>
                                                                        </tr>

                                                                        <tr>
                                                                            <td>@Html.DisplayNameFor(model => model.Item1.Sulfas)</td>
                                                                            <td>@Html.DisplayFor(model => model.Item1.Sulfas)</td>
                                                                            <td>@Html.DisplayNameFor(model => model.Item1.Penicilina)</td>
                                                                            <td>@Html.DisplayFor(model => model.Item1.Penicilina)</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td>@Html.DisplayNameFor(model => model.Item1.AnomaliasAnestesia)</td>
                                                                            <td>@Html.DisplayFor(model => model.Item1.AnomaliasAnestesia)</td>
                                                                            <td>@Html.DisplayNameFor(model => model.Item1.Embarazo)</td>
                                                                            <td>@Html.DisplayFor(model => model.Item1.Embarazo)</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td>@Html.DisplayNameFor(model => model.Item1.Lactancia)</td>
                                                                            <td>@Html.DisplayFor(model => model.Item1.Lactancia)</td>
                                                                            <td>@Html.DisplayNameFor(model => model.Item1.Otros)</td>
                                                                            <td>@Html.DisplayFor(model => model.Item1.Otros)</td>
                                                                        </tr>
                                                                    </table>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>

                                                </div>
                                            </div>

                                        </div>

                                    </div>

                                    @*Datos personales*@
                                    <div class="tab-pane" id="tab2default">
                                        <div class="form-horizontal">
                                            <div class="container">
                                                @if (ViewBag.MessageErrorEdit != null)
                                                {
                                                    <div class="alert alert-danger">
                                                        <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                                                        <label class="control-label center-block" id="mensajeErrorEditarExp">@ViewBag.MessageErrorEdit</label>
                                                    </div>
                                                    <script>
                                                        $('.nav-tabs a[href="#tab2default"]').tab('show');
                                                    </script>

                                                }

                                            </div>
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    @Html.LabelFor(model => model.Item1.Nombre, htmlAttributes: new { @class = "control-label col-md-2 " })
                                                    <div class='col-md-8'>
                                                        <div class='col-md-3 indent-small' style="margin-left:-5px;">
                                                            <div class='form-group internal input-group'>
                                                                <span class='input-group-addon'>
                                                                    <i class='glyphicon glyphicon-user'></i>
                                                                </span>
                                                                @Html.EditorFor(model => model.Item1.Nombre, new { htmlAttributes = new { @class = "form-control", @placeholder = "Nombre" } })
                                                                @Html.ValidationMessageFor(model => model.Item1.Nombre, "", new { @class = "text-danger" })
                                                            </div>
                                                        </div>
                                                        <div class='col-md-3 indent-small'>
                                                            <div class='form-group internal '>
                                                                @Html.EditorFor(model => model.Item1.Apellido1, new { htmlAttributes = new { @class = "form-control", @placeholder = "1er Apellido" } })
                                                                @Html.ValidationMessageFor(model => model.Item1.Apellido1, "", new { @class = "text-danger" })
                                                            </div>
                                                        </div>
                                                        <div class='col-md-3 indent-small'>
                                                            <div class='form-group internal'>
                                                                @Html.EditorFor(model => model.Item1.Apellido2, new { htmlAttributes = new { @class = "form-control", @placeholder = "2do Apellido" } })
                                                                @Html.ValidationMessageFor(model => model.Item1.Apellido2, "", new { @class = "text-danger" })
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="form-group">
                                                    @Html.LabelFor(model => model.Item1.Cedula, htmlAttributes: new { @class = "control-label col-md-2 " })
                                                    <div class='col-md-6'>
                                                        <div class='form-group internal input-group'>
                                                            <span class='input-group-addon'>
                                                                <i class='glyphicon glyphicon-pencil'></i>
                                                            </span>
                                                            @Html.EditorFor(model => model.Item1.Cedula, new { htmlAttributes = new { @class = "form-control", @maxlength = "9", @readonly = "true" } })
                                                            @Html.ValidationMessageFor(model => model.Item1.Cedula, "", new { @class = "text-danger" })
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="form-group">
                                                    @Html.LabelFor(model => model.Item1.FechaNacimiento, htmlAttributes: new { @class = "control-label col-md-2 " })
                                                    <div class='col-md-6'>
                                                        <div class='form-group internal input-group'>
                                                            <span class='input-group-addon'>
                                                                <i class='glyphicon glyphicon-calendar'></i>
                                                            </span>
                                                            @Html.EditorFor(model => model.Item1.FechaNacimiento, new { htmlAttributes = new { @class = "form-control", @type = "date", @id = "fechaNacimiento", @max = (DateTime.Now.Year - 1).ToString() + "-01-01", @min = "1920-01-01", @onchange = "javascript:mostrarEncargado();" } })
                                                            @Html.ValidationMessageFor(model => model.Item1.FechaNacimiento, "", new { @class = "text-danger" })
                                                        </div>
                                                    </div>
                                                </div>


                                                <div class="form-group" id="divEdad" style="display:none;">
                                                    @Html.Label("Edad", htmlAttributes: new { @class = "control-label col-md-2" })
                                                    <div class='col-md-6'>

                                                        <div class='form-group internal input-group'>
                                                            <span class='input-group-addon'>
                                                                <i class='glyphicon glyphicon-bishop'></i>
                                                            </span>
                                                            @Html.HiddenFor(model => model.Item1.Edad, new { id = "EdadH" })
                                                            <label id="lblEdad" class="form-control"></label>
                                                        </div>
                                                    </div>
                                                </div>


                                                <div class="form-group" id="divMenorEdad" style="display:none;">
                                                    @Html.Label("Menor de edad", htmlAttributes: new { @class = "control-label col-md-2" })
                                                    <div class='col-md-6'>
                                                        <div class='form-group internal input-group'>
                                                            <span class='input-group-addon'>
                                                                <i class='glyphicon glyphicon-bishop'></i>
                                                            </span>
                                                            @Html.HiddenFor(model => model.Item1.Edad, new { id = "MenorEdadH" })
                                                            <label id="lblMenorEdad" class="form-control"></label>
                                                        </div>
                                                    </div>
                                                </div>


                                                <div class="form-group" id="encargado" style="display:none;">
                                                    @Html.LabelFor(model => model.Item1.NombreEncargado, htmlAttributes: new { @class = "control-label col-md-2 " })
                                                    <div class='col-md-8'>
                                                        <div class='col-md-3 indent-small' style="margin-left:-5px;">
                                                            <div class='form-group internal input-group'>
                                                                <span class='input-group-addon'>
                                                                    <i class='glyphicon glyphicon-user'></i>
                                                                </span>
                                                                @Html.EditorFor(model => model.Item1.NombreEncargado, new { htmlAttributes = new { @class = "form-control", @placeholder = "Nombre" } })
                                                                @Html.ValidationMessageFor(model => model.Item1.NombreEncargado, "", new { @class = "text-danger" })
                                                            </div>
                                                        </div>
                                                        <div class='col-md-3 indent-small'>
                                                            <div class='form-group internal'>
                                                                @Html.EditorFor(model => model.Item1.Apellido1Encargado, new { htmlAttributes = new { @class = "form-control", @placeholder = "1er Apellido" } })
                                                                @Html.ValidationMessageFor(model => model.Item1.Apellido1Encargado, "", new { @class = "text-danger" })
                                                            </div>
                                                        </div>
                                                        <div class='col-md-3 indent-small'>
                                                            <div class='form-group internal'>
                                                                @Html.EditorFor(model => model.Item1.Apellido2Encargado, new { htmlAttributes = new { @class = "form-control", @placeholder = "2do Apellido" } })
                                                                @Html.ValidationMessageFor(model => model.Item1.Apellido2Encargado, "", new { @class = "text-danger" })
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>


                                                <div class="form-group">
                                                    @Html.LabelFor(model => model.Item1.IdEstadoCivil, htmlAttributes: new { @class = "control-label col-md-2 " })
                                                    <div class='col-md-6'>
                                                        <div class='indent-small'>
                                                            <div class='form-group internal input-group'>
                                                                <span class='input-group-addon'>
                                                                    <i class='glyphicon glyphicon-question-sign'></i>
                                                                </span>
                                                                @Html.DropDownListFor(model => model.Item1.IdEstadoCivil, new SelectList(Model.Item1.ListCivilStatus, "Id", "Descripcion"), "--Elija una opción--", new { @class = "form-control" })
                                                                @Html.ValidationMessageFor(model => model.Item1.IdEstadoCivil, "", new { @class = "text-danger" })
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    @Html.LabelFor(model => model.Item1.Domicilio, htmlAttributes: new { @class = "control-label col-md-2" })
                                                    <div class='col-md-6'>
                                                        <div class='form-group internal input-group'>
                                                            <span class='input-group-addon'>
                                                                <i class='glyphicon glyphicon-home'></i>
                                                            </span>
                                                            @Html.EditorFor(model => model.Item1.Domicilio, new { htmlAttributes = new { @class = "form-control" } })
                                                            @Html.ValidationMessageFor(model => model.Item1.Domicilio, "", new { @class = "text-danger" })
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    @Html.LabelFor(model => model.Item1.Telefono1, htmlAttributes: new { @class = "control-label col-md-2" })
                                                    <div class="col-md-6">
                                                        <div class='form-group'>
                                                            <div class="col-md-6">
                                                                <span class='input-group-addon'>
                                                                    <i class='glyphicon glyphicon-phone-alt'></i>
                                                                </span>
                                                                @Html.EditorFor(model => model.Item1.Telefono1, new { htmlAttributes = new { @class = "form-control", @placeholder = "casa: xxxx-xxxx" } })
                                                                @Html.ValidationMessageFor(model => model.Item1.Telefono1, "", new { @class = "text-danger" })
                                                            </div>
                                                            <div class="col-md-6">
                                                                <span class='input-group-addon'>
                                                                    <i class='glyphicon glyphicon-phone'></i>
                                                                </span>
                                                                @Html.EditorFor(model => model.Item1.Telefono2, new { htmlAttributes = new { @class = "form-control", @placeholder = "celular: xxxx-xxxx" } })
                                                                @Html.ValidationMessageFor(model => model.Item1.Telefono2, "", new { @class = "text-danger" })
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="form-group">
                                                    @Html.LabelFor(model => model.Item1.Profesion, htmlAttributes: new { @class = "control-label col-md-2 " })
                                                    <div class='col-md-6'>
                                                        <div class='indent-small'>
                                                            <div class='form-group internal input-group'>
                                                                <span class='input-group-addon'>
                                                                    <i class='glyphicon glyphicon-user'></i>
                                                                </span>
                                                                @Html.EditorFor(model => model.Item1.Profesion, new { htmlAttributes = new { @class = "form-control" } })
                                                                @Html.ValidationMessageFor(model => model.Item1.Profesion, "", new { @class = "text-danger" })
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    @Html.LabelFor(model => model.Item1.Email, htmlAttributes: new { @class = "control-label col-md-2 " })
                                                    <div class='col-md-6'>
                                                        <div class='indent-small'>
                                                            <div class='form-group internal input-group'>
                                                                <span class='input-group-addon'>
                                                                    <i class='glyphicon glyphicon-envelope'></i>
                                                                </span>
                                                                @Html.EditorFor(model => model.Item1.Email, new { htmlAttributes = new { @class = "form-control" } })
                                                                @Html.ValidationMessageFor(model => model.Item1.Email, "", new { @class = "text-danger" })
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    @Html.LabelFor(model => model.Item1.ContactoEmergencia, htmlAttributes: new { @class = "control-label col-md-2 " })
                                                    <div class='col-md-6'>
                                                        <div class='indent-small'>
                                                            <div class='form-group internal input-group'>
                                                                <span class='input-group-addon'>
                                                                    <i class='glyphicon glyphicon-alert'></i>
                                                                </span>
                                                                @Html.EditorFor(model => model.Item1.ContactoEmergencia, new { htmlAttributes = new { @class = "form-control" } })
                                                                @Html.ValidationMessageFor(model => model.Item1.ContactoEmergencia, "", new { @class = "text-danger" })
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <a class="btn btn-primary pull-right" href="#tab3default" id="btnNext" data-toggle="tab">Continuar</a>
                                    </div>

                                    @*Enfermedades*@
                                    <div class="tab-pane" id="tab3default">
                                        @*@Html.ValidationSummary(false, "", new { @class = "text-danger" })*@
                                        <div class="col-md-12">
                                            <div class="col-sm-3">
                                                <div class="row">
                                                    @Html.LabelFor(model => model.Item1.TratamientoMedico, htmlAttributes: new { @class = "label-custom" })
                                                    <div class="col-md-2">
                                                        @Html.EditorFor(model => model.Item1.TratamientoMedico, new { htmlAttributes = new { @class = "form-control" } })
                                                        @Html.ValidationMessageFor(model => model.Item1.TratamientoMedico, "", new { @class = "text-danger" })
                                                    </div>

                                                </div>


                                                <div class="row">
                                                    @Html.LabelFor(model => model.Item1.Medicamento, htmlAttributes: new { @class = "label-custom" })
                                                    <div class="col-md-2">
                                                        @Html.EditorFor(model => model.Item1.Medicamento, new { htmlAttributes = new { @class = "form-control" } })
                                                        @Html.ValidationMessageFor(model => model.Item1.Medicamento, "", new { @class = "text-danger" })
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    @Html.LabelFor(model => model.Item1.Diabetes, htmlAttributes: new { @class = "label-custom " })
                                                    <div class="col-md-2">
                                                        @Html.EditorFor(model => model.Item1.Diabetes, new { htmlAttributes = new { @class = "form-control" } })
                                                        @Html.ValidationMessageFor(model => model.Item1.Diabetes, "", new { @class = "text-danger" })
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    @Html.LabelFor(model => model.Item1.Artritis, htmlAttributes: new { @class = "label-custom " })
                                                    <div class="col-md-2">
                                                        @Html.EditorFor(model => model.Item1.Artritis, new { htmlAttributes = new { @class = "form-control" } })
                                                        @Html.ValidationMessageFor(model => model.Item1.Artritis, "", new { @class = "text-danger" })
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    @Html.LabelFor(model => model.Item1.EnfermedadCardiaca, htmlAttributes: new { @class = "label-custom " })
                                                    <div class="col-md-2">
                                                        @Html.EditorFor(model => model.Item1.EnfermedadCardiaca, new { htmlAttributes = new { @class = "form-control" } })
                                                        @Html.ValidationMessageFor(model => model.Item1.EnfermedadCardiaca, "", new { @class = "text-danger" })
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    @Html.LabelFor(model => model.Item1.Hepatitis, htmlAttributes: new { @class = "label-custom " })
                                                    <div class="col-md-2">
                                                        @Html.EditorFor(model => model.Item1.Hepatitis, new { htmlAttributes = new { @class = "form-control" } })
                                                        @Html.ValidationMessageFor(model => model.Item1.Hepatitis, "", new { @class = "text-danger" })
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    @Html.LabelFor(model => model.Item1.FiebreReumatica, htmlAttributes: new { @class = "label-custom " })
                                                    <div class="col-md-2">
                                                        @Html.EditorFor(model => model.Item1.FiebreReumatica, new { htmlAttributes = new { @class = "form-control" } })
                                                        @Html.ValidationMessageFor(model => model.Item1.FiebreReumatica, "", new { @class = "text-danger" })
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    @Html.LabelFor(model => model.Item1.Ulcera, htmlAttributes: new { @class = "label-custom " })
                                                    <div class="col-md-2">
                                                        @Html.EditorFor(model => model.Item1.Ulcera, new { htmlAttributes = new { @class = "form-control" } })
                                                        @Html.ValidationMessageFor(model => model.Item1.Ulcera, "", new { @class = "text-danger" })
                                                    </div>
                                                </div>

                                            </div>
                                            <div class="col-sm-3">
                                                <div class="row">
                                                    @Html.LabelFor(model => model.Item1.PresionAlta, htmlAttributes: new { @class = "label-custom " })
                                                    <div class="col-md-2">
                                                        @Html.EditorFor(model => model.Item1.PresionAlta, new { htmlAttributes = new { @class = "form-control" } })
                                                        @Html.ValidationMessageFor(model => model.Item1.PresionAlta, "", new { @class = "text-danger" })
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    @Html.LabelFor(model => model.Item1.PresionBaja, htmlAttributes: new { @class = "label-custom " })
                                                    <div class="col-md-2">
                                                        @Html.EditorFor(model => model.Item1.PresionBaja, new { htmlAttributes = new { @class = "form-control" } })
                                                        @Html.ValidationMessageFor(model => model.Item1.PresionBaja, "", new { @class = "text-danger" })
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    @Html.LabelFor(model => model.Item1.EnfermedadesNerviosas, htmlAttributes: new { @class = "label-custom " })
                                                    <div class="col-md-2">
                                                        @Html.EditorFor(model => model.Item1.EnfermedadesNerviosas, new { htmlAttributes = new { @class = "form-control" } })
                                                        @Html.ValidationMessageFor(model => model.Item1.EnfermedadesNerviosas, "", new { @class = "text-danger" })
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    @Html.LabelFor(model => model.Item1.OtrasEnfermedades, htmlAttributes: new { @class = "label-custom " })
                                                    <div class="col-md-2">
                                                        @Html.EditorFor(model => model.Item1.OtrasEnfermedades, new { htmlAttributes = new { @class = "form-control" } })
                                                        @Html.ValidationMessageFor(model => model.Item1.OtrasEnfermedades, "", new { @class = "text-danger" })
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    @Html.LabelFor(model => model.Item1.SangradoProlongado, htmlAttributes: new { @class = "label-custom " })
                                                    <div class="col-md-2">
                                                        @Html.EditorFor(model => model.Item1.SangradoProlongado, new { htmlAttributes = new { @class = "form-control" } })
                                                        @Html.ValidationMessageFor(model => model.Item1.SangradoProlongado, "", new { @class = "text-danger" })
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    @Html.LabelFor(model => model.Item1.Desmayos, htmlAttributes: new { @class = "label-custom " })
                                                    <div class="col-md-2">
                                                        @Html.EditorFor(model => model.Item1.Desmayos, new { htmlAttributes = new { @class = "form-control" } })
                                                        @Html.ValidationMessageFor(model => model.Item1.Desmayos, "", new { @class = "text-danger" })
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    @Html.LabelFor(model => model.Item1.IntervencionQuirurgica, htmlAttributes: new { @class = "label-custom " })
                                                    <div class="col-md-2">
                                                        @Html.EditorFor(model => model.Item1.IntervencionQuirurgica, new { htmlAttributes = new { @class = "form-control" } })
                                                        @Html.ValidationMessageFor(model => model.Item1.IntervencionQuirurgica, "", new { @class = "text-danger" })
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    @Html.LabelFor(model => model.Item1.Aspirina, htmlAttributes: new { @class = "label-custom " })
                                                    <div class="col-md-2">
                                                        @Html.EditorFor(model => model.Item1.Aspirina, new { htmlAttributes = new { @class = "form-control" } })
                                                        @Html.ValidationMessageFor(model => model.Item1.Aspirina, "", new { @class = "text-danger" })
                                                    </div>
                                                </div>


                                            </div>
                                            <div class="col-sm-3">
                                                <div class="row">
                                                    @Html.LabelFor(model => model.Item1.Sulfas, htmlAttributes: new { @class = "label-custom " })
                                                    <div class="col-md-2">
                                                        @Html.EditorFor(model => model.Item1.Sulfas, new { htmlAttributes = new { @class = "form-control" } })
                                                        @Html.ValidationMessageFor(model => model.Item1.Sulfas, "", new { @class = "text-danger" })
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    @Html.LabelFor(model => model.Item1.Penicilina, htmlAttributes: new { @class = "label-custom " })
                                                    <div class="col-md-2">
                                                        @Html.EditorFor(model => model.Item1.Penicilina, new { htmlAttributes = new { @class = "form-control" } })
                                                        @Html.ValidationMessageFor(model => model.Item1.Penicilina, "", new { @class = "text-danger" })
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    @Html.LabelFor(model => model.Item1.AnomaliasAnestesia, htmlAttributes: new { @class = "label-custom " })
                                                    <div class="col-md-2">
                                                        @Html.EditorFor(model => model.Item1.AnomaliasAnestesia, new { htmlAttributes = new { @class = "form-control" } })
                                                        @Html.ValidationMessageFor(model => model.Item1.AnomaliasAnestesia, "", new { @class = "text-danger" })
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    @Html.LabelFor(model => model.Item1.Embarazo, htmlAttributes: new { @class = "label-custom" })
                                                    <div class="col-md-2">
                                                        @Html.EditorFor(model => model.Item1.Embarazo, new { htmlAttributes = new { @class = "form-control" } })
                                                        @Html.ValidationMessageFor(model => model.Item1.Embarazo, "", new { @class = "text-danger" })
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    @Html.LabelFor(model => model.Item1.Lactancia, htmlAttributes: new { @class = "label-custom" })
                                                    <div class="col-md-2">
                                                        @Html.EditorFor(model => model.Item1.Lactancia, new { htmlAttributes = new { @class = "form-control" } })
                                                        @Html.ValidationMessageFor(model => model.Item1.Lactancia, "", new { @class = "text-danger" })
                                                    </div>
                                                </div>


                                            </div>
                                            <div class="col-sm-3">
                                                <div class="row">
                                                    @Html.LabelFor(model => model.Item1.Otros, htmlAttributes: new { @class = "label-custom " })
                                                    <div class="col-md-12">
                                                        @Html.TextAreaFor(model => model.Item1.Otros, new { htmlAttributes = new { @class = "form-control" } })
                                                        @Html.ValidationMessageFor(model => model.Item1.Otros, "", new { @class = "text-danger" })
                                                    </div>
                                                </div>
                                                <br /><br /><br />
                                                <div class="row">
                                                    <a class="btn btn-primary" href="#tab2default" id="btnPrevious" data-toggle="tab">Anterior</a>
                                                    <input type="submit" value="Guardar cambios" class="btn btn-success" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    @*Seccion del Odontograma*@
                                    <div class="tab-pane" id="tab4default">
                                        <div class="col-md-12">
                                            @*<div class="alert alert-success">
                                                    <label class="control-label center-block " id="mensajeError"></label>
                                                </div>*@
                                            <label class="control-label">Seleccione el tipo </label><hr />
                                            <input type="radio" id="permanente" name="tipo" onchange="cambiarOdontograma();" checked />Permanente <br />
                                            <input type="radio" id="decidua" name="tipo" onchange="cambiarOdontograma();" />Decidua

                                            <div class="col-md-12 col-md-offset-0 text-center" id="adultoArriba" style="display:block;">
                                                <button class="btn diente" type="button" value="18" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal">1.8</button>
                                                <button class="btn diente" type="button" value="17" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal">1.7</button>
                                                <button class="btn diente" type="button" value="16" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal">1.6</button>
                                                <button class="btn diente" type="button" value="15" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal">1.5</button>
                                                <button class="btn diente" type="button" value="14" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal">1.4</button>
                                                <button class="btn diente" type="button" value="13" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal">1.3</button>
                                                <button class="btn diente" type="button" value="12" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal">1.2</button>
                                                <button class="btn diente" type="button" value="11" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal">1.1</button>
                                                <button class="btn diente" type="button" value="21" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal">2.1</button>
                                                <button class="btn diente" type="button" value="22" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal">2.2</button>
                                                <button class="btn diente" type="button" value="23" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal">2.3</button>
                                                <button class="btn diente" type="button" value="24" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal">2.4</button>
                                                <button class="btn diente" type="button" value="25" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal">2.5</button>
                                                <button class="btn diente" type="button" value="26" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal">2.6</button>
                                                <button class="btn diente" type="button" value="27" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal">2.7</button>
                                                <button class="btn diente" type="button" value="28" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal">2.8</button>
                                            </div>
                                            <div class="col-md-12 col-md-offset-0 text-center" id="ninoArriba" style="display:none;">
                                                <div class="clearfix"></div>
                                                <button class="btn diente_nino" type="button" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal" value="55">5.5</button>
                                                <button class="btn diente_nino" type="button" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal" value="54">5.4</button>
                                                <button class="btn diente_nino" type="button" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal" value="53">5.3</button>
                                                <button class="btn diente_nino" type="button" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal" value="52">5.2</button>
                                                <button class="btn diente_nino" type="button" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal" value="51">5.1</button>
                                                <button class="btn diente_nino" type="button" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal" value="61">6.1</button>
                                                <button class="btn diente_nino" type="button" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal" value="62">6.2</button>
                                                <button class="btn diente_nino" type="button" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal" value="63">6.3</button>
                                                <button class="btn diente_nino" type="button" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal" value="64">6.4</button>
                                                <button class="btn diente_nino" type="button" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal" value="65">6.5</button>
                                            </div>
                                            <div class="col-md-12 col-md-offset-0 text-center" id="ninoAbajo" style="display:none;">
                                                <button class="btn diente_nino" type="button" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal" value="85">8.5</button>
                                                <button class="btn diente_nino" type="button" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal" value="84">8.4</button>
                                                <button class="btn diente_nino" type="button" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal" value="83">8.3</button>
                                                <button class="btn diente_nino" type="button" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal" value="82">8.2</button>
                                                <button class="btn diente_nino" type="button" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal" value="81">8.1</button>
                                                <button class="btn diente_nino" type="button" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal" value="71">7.1</button>
                                                <button class="btn diente_nino" type="button" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal" value="72">7.2</button>
                                                <button class="btn diente_nino" type="button" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal" value="73">7.3</button>
                                                <button class="btn diente_nino" type="button" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal" value="74">7.4</button>
                                                <button class="btn diente_nino" type="button" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal" value="75">7.5</button>
                                            </div>
                                            <div class="col-md-12 col-md-offset-0 text-center" id="adultoAbajo" style="display:block;">
                                                <button class="btn diente" type="button" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal" value="48">4.8</button>
                                                <button class="btn diente" type="button" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal" value="47">4.7</button>
                                                <button class="btn diente" type="button" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal" value="46">4.6</button>
                                                <button class="btn diente" type="button" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal" value="45">4.5</button>
                                                <button class="btn diente" type="button" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal" value="44">4.4</button>
                                                <button class="btn diente" type="button" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal" value="43">4.3</button>
                                                <button class="btn diente" type="button" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal" value="42">4.2</button>
                                                <button class="btn diente" type="button" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal" value="41">4.1</button>
                                                <button class="btn diente" type="button" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal" value="31">3.1</button>
                                                <button class="btn diente" type="button" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal" value="32">3.2</button>
                                                <button class="btn diente" type="button" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal" value="33">3.3</button>
                                                <button class="btn diente" type="button" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal" value="34">3.4</button>
                                                <button class="btn diente" type="button" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal" value="35">3.5</button>
                                                <button class="btn diente" type="button" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal" value="36">3.6</button>
                                                <button class="btn diente" type="button" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal" value="37">3.7</button>
                                                <button class="btn diente" type="button" data-toggle="modal" onclick="return buttonClick(this)" data-target="#myModal" value="38">3.8</button>
                                            </div>
                                            <div class="clearfix"></div>
                                        </div>
                                    </div>

                                    @*Seccion de Tratamientos*@
                                    <div class="tab-pane" id="tab5default">
                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <div class="col-md-3">
                                                    <label>Filtrar por rangos de fecha</label>
                                                    <div class="input-group">
                                                        <div id="reportrange" class="text-center" style="background: #fff; cursor: pointer; padding: 5px; height:34px;  border: 1px solid #ccc;">
                                                            <i class="glyphicon glyphicon-calendar fa fa-calendar"></i>&nbsp;
                                                            <span></span> <b class="caret"></b>

                                                        </div>
                                                        <span class="input-group-btn">
                                                            <button class="btn btn-danger" id="btnFiltrarPorFechas" onclick="return FiltrarTratamientoPorFecha()" type="button"><span class="glyphicon glyphicon-search"></span> Buscar</button>
                                                        </span>
                                                    </div>
                                                </div>

                                                <div class="col-md-3">
                                                    <label>Filtrar por tratamiento</label>
                                                    <div class="input-group">
                                                        @Html.DropDownListFor(Model => Model.Item2.IdTratamiento, new SelectList(Model.Item2.ListTratamiento, "Id", "Nombre"), new { @class = "form-control", @id = "drpTratamientoFiltro", @style = "cursor: pointer;" })
                                                        @Html.ValidationMessageFor(model => model.Item2.IdTratamiento, "", new { @class = "text-danger" })
                                                        <span class="input-group-btn">
                                                            <button class="btn btn-danger" id="btnFiltrarPorTratamiento" onclick="return FiltrarTratamientoPorTratamiento()" type="button"><span class="glyphicon glyphicon-search"></span> Buscar</button>
                                                        </span>
                                                    </div>
                                                </div>

                                                <div class="col-md-3">
                                                    <label>Filtrar por diente</label>
                                                    <div class="input-group">
                                                        <select class="js-example-basic-single" style="width: 100%; cursor: pointer;" id="drpNoDiente">
                                                            <option value="11">1.1</option>
                                                            <option value="12">1.2</option>
                                                            <option value="13">1.3</option>
                                                            <option value="14">1.4</option>
                                                            <option value="15">1.5</option>
                                                            <option value="16">1.6</option>
                                                            <option value="17">1.7</option>
                                                            <option value="18">1.8</option>
                                                            <option value="21">2.1</option>
                                                            <option value="22">2.2</option>
                                                            <option value="23">2.3</option>
                                                            <option value="24">2.4</option>
                                                            <option value="25">2.5</option>
                                                            <option value="26">2.6</option>
                                                            <option value="27">2.7</option>
                                                            <option value="28">2.8</option>
                                                            <option value="41">4.1</option>
                                                            <option value="42">4.2</option>
                                                            <option value="43">4.3</option>
                                                            <option value="44">4.4</option>
                                                            <option value="45">4.5</option>
                                                            <option value="46">4.6</option>
                                                            <option value="47">4.7</option>
                                                            <option value="48">4.8</option>
                                                            <option value="31">3.1</option>
                                                            <option value="32">3.2</option>
                                                            <option value="33">3.3</option>
                                                            <option value="34">3.4</option>
                                                            <option value="35">3.5</option>
                                                            <option value="36">3.6</option>
                                                            <option value="37">3.7</option>
                                                            <option value="38">3.8</option>


                                                            <option value="51">5.1</option>
                                                            <option value="52">5.2</option>
                                                            <option value="53">5.3</option>
                                                            <option value="54">5.4</option>
                                                            <option value="55">5.5</option>
                                                            <option value="61">6.1</option>
                                                            <option value="62">6.2</option>
                                                            <option value="63">6.3</option>
                                                            <option value="64">6.4</option>
                                                            <option value="65">6.5</option>
                                                            <option value="71">7.1</option>
                                                            <option value="72">7.2</option>
                                                            <option value="73">7.3</option>
                                                            <option value="74">7.4</option>
                                                            <option value="75">7.5</option>
                                                            <option value="81">8.1</option>
                                                            <option value="82">8.2</option>
                                                            <option value="83">8.3</option>
                                                            <option value="84">8.4</option>
                                                            <option value="85">8.5</option>
                                                        </select>
                                                        <span class="input-group-btn">
                                                            <button class="btn btn-danger" id="btnFiltrarPorTratamiento" onclick="return FiltrarTratamientoPorDiente()" type="button"><span class="glyphicon glyphicon-search"></span> Buscar</button>
                                                        </span>
                                                    </div>
                                                </div>

                                                <div class="col-md-3">
                                                    <label>Filtrar por cara del diente</label>
                                                    <div class="input-group">
                                                        @Html.DropDownListFor(Model => Model.Item2.Cara, new List<SelectListItem>
                                                        {
                                                        new SelectListItem{ Text="Vestibular", Value = "Vestibular" },
                                                        new SelectListItem{ Text="Lingual", Value = "Lingual" },
                                                        new SelectListItem{ Text="Distal", Value = "Distal" },
                                                        new SelectListItem{ Text="Incisal", Value = "Incisal" },
                                                        new SelectListItem{ Text="Mesial", Value = "Mesial" },
                                                        new SelectListItem{ Text="Oclusal", Value = "Oclusal" },
                                                        new SelectListItem{ Text="Mixta", Value = "Mixta" },
                                                        new SelectListItem{ Text="Dentadura Completa", Value = "Dentadura Completa" },
                                                        }, new { @class = "form-control", @id = "drpCarasDiente", @style = "cursor: pointer;" })
                                                        <span class="input-group-btn">
                                                            <button class="btn btn-danger" id="btnFiltrarPorCaraDiente" onclick="return FiltrarTratamientoPorCaraDiente()" type="button"><span class="glyphicon glyphicon-search"></span> Buscar</button>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-12 table table-responsive">
                                            <table class="table" id="PartialViewTratamientosPaciente">
                                                <tr>

                                                    <th>
                                                        @Html.DisplayNameFor(model => model.Item2.Tratamiento)
                                                    </th>
                                                    <th>
                                                        @Html.DisplayNameFor(model => model.Item2.IdDiente)
                                                    </th>
                                                    <th>
                                                        @Html.DisplayNameFor(model => model.Item2.Cara)
                                                    </th>
                                                    <th>
                                                        Detalles
                                                    </th>
                                                    <th>
                                                        @Html.DisplayNameFor(model => model.Item2.FechaTratamiento)
                                                    </th>
                                                    <th></th>
                                                </tr>

                                                @foreach (var item in Model.Item1.ListTratamientoPaciente)
                                                {
                                                    <tr>

                                                        <td>
                                                            @Html.DisplayFor(modelItem => item.Tratamiento)
                                                        </td>

                                                        <td>
                                                            @Html.DisplayFor(modelItem => item.IdDiente)
                                                        </td>
                                                        <td>
                                                            @Html.DisplayFor(modelItem => item.Cara)
                                                        </td>
                                                        <td>
                                                            @Html.DisplayFor(modelItem => item.Observaciones)
                                                        </td>
                                                        <td>
                                                            @Html.DisplayFor(modelItem => item.FechaTratamiento, "{dd-MM-yyyy}")
                                                        </td>
                                                        <td>
                                                            @{
                                                                var _Payment = Model.Item1.ListPayment.SingleOrDefault(p => p.Estado.Equals(1));
                                                                if (_Payment != null)
                                                                {
                                                                    if (_Payment.Id.Equals(item.IdPayment))
                                                                    {
                                                                        <a href="@Url.Action("Edit", "TratamientoPacientes", new { id = item.Id })" class="btn btn-primary">Editar</a>
                                                                    }
                                                                }
                                                            }


                                                        </td>
                                                    </tr>
                                                                }

                                            </table>
                                            <div class="clearfix"></div>
                                        </div>
                                    </div>

                                    @*Seccion de Cobros*@
                                    <div class="tab-pane" id="tab6default">
                                        <div class="col-md-12">
                                            <div class="form-group">
                                                @*<div class="col-md-3">
                                                    <label>Filtrar por rangos de fecha</label>
                                                    <div class="input-group">
                                                        <div id="reportrange" class="text-center" style="background: #fff; cursor: pointer; padding: 5px; height:34px;  border: 1px solid #ccc;">
                                                            <i class="glyphicon glyphicon-calendar fa fa-calendar"></i>&nbsp;
                                                            <span></span> <b class="caret"></b>

                                                        </div>
                                                        <span class="input-group-btn">
                                                            <button class="btn btn-danger" id="btnFiltrarPorFechaFactura" onclick="" type="button"><span class="glyphicon glyphicon-search"></span> Buscar</button>
                                                        </span>
                                                    </div>
                                                </div>*@

                                                <div class="col-md-3">
                                                    <label>Filtrar por Estado Factura</label>
                                                    <div class="input-group">
                                                        @Html.DropDownListFor(Model => Model.Item2.Cara, new List<SelectListItem>
                                                        {
                                                        new SelectListItem{ Text="Activa", Value ="1"},
                                                        new SelectListItem{ Text="Facturada", Value = "2"},
                                                        new SelectListItem{ Text="Cancelada", Value = "3"},

                                                        }, new { @class = "form-control", @id = "drpEstadoFactura", @style = "cursor: pointer;" })
                                                        <span class="input-group-btn">
                                                            <button class="btn btn-danger" id="btnFiltrarPorEstadoFactura" onclick="return FiltrarFacturaPorEstado()" type="button"><span class="glyphicon glyphicon-search"></span> Buscar</button>
                                                        </span>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                        <div class="col-md-12 table table-responsive">
                                            <table class="table" id="PartialViewPayments">
                                                <tr>
                                                    <th>
                                                        N. Factura
                                                    </th>
                                                    <th>
                                                        Fecha
                                                    </th>
                                                    <th>
                                                        Costos adicionales
                                                    </th>
                                                    <th>
                                                        Total a pagar
                                                    </th>
                                                    <th>
                                                        Saldo
                                                    </th>
                                                </tr>

                                                @foreach (var item in Model.Item1.ListPayment)
                                                {
                                                    <tr>
                                                        <td>
                                                            @Html.DisplayName(item.Id.ToString())
                                                        </td>
                                                        <td>
                                                            @Html.DisplayName(item.FechaRegistro.ToShortDateString())
                                                        </td>
                                                        <td>
                                                            @string.Format("{0:C}", item.MontoAdicional)
                                                        </td>
                                                        <td>
                                                            @string.Format("{0:C}", item.TotalPagar)
                                                        </td>

                                                        <td>
                                                            @string.Format("{0:C}", item.Saldo)
                                                        </td>

                                                        <td>
                                                            @*Si aún no esta facturada que solo pueda facturar o ver lo que lleva hasta el momento*@
                                                            @if (item.Estado.Equals(1))
                                                            {
                                                                <button class="btn btn-danger btn_d" type="button" value='@item.Id' data-toggle="modal" onclick="return buttonClickFacturar(this)">Facturar</button>
                                                                @*@Html.ActionLink("Anular", "Create", null, new { @class = "btn btn-warning", @style = "margin-right:5px; width:105px;" })*@
                                                                <button class="btn btn-primary btn_p" type="button" value='@item.Id' data-toggle="modal" onclick="return buttonClickDetalleFactura(this)" data-target="#verFactura">Ver Factura</button>
                                                            }
                                                            @*si ya está facturada que se pueda abonar a la factura o anularla*@
                                                            else if (item.Estado.Equals(2))
                                                            {
                                                                <button class="btn btn-success" type="button" value='@item.Id' data-toggle="modal" onclick="return buttonClickAbonarFactura(this)" data-target="#AbonarFactura">Abonar</button>
                                                                <button class="btn btn-warning btn_w" type="button" id="verAbonosInput" value='@item.Id' data-toggle="modal" onclick="return buttonClickDetalleAbonosPorFactura(this)">Ver Abonos</button>
                                                                <button class="btn btn-primary btn_p" type="button" id="verFacturaInput" value='@item.Id' data-toggle="modal" onclick="return buttonClickDetalleFactura(this)" data-target="#verFactura">Ver Factura</button>
                                                            }
                                                            else
                                                            {
                                                                @*@Html.ActionLink("Anular", "Create", null, new { @class = "btn btn-warning", @style = "margin-right:5px; width:105px;" })*@

                                                                <button class="btn btn-warning btn_w" type="button" id="verAbonosInput" value='@item.Id' data-toggle="modal" onclick="return buttonClickDetalleAbonosPorFactura(this)">Ver Abonos</button>
                                                                <button class="btn btn-primary btn_p" type="button" id="verFacturaInput" value='@item.Id' data-toggle="modal" onclick="return buttonClickDetalleFactura(this)" data-target="#verFactura">Ver Factura</button>
                                                            }

                                                            @*@Html.ActionLink("Edit", "Edit", new { id=item.Id }) |*@
                                                        </td>
                                                    </tr>
                                                }


                                            </table>
                                            <div class="clearfix"></div>
                                        </div>
                                    </div>

                                </div>
                                @Html.ActionLink("Volver al listado", "Index", null, new { @class = "btn btn-primary" })
                            </div>

                        </div><!-- Fin del Panel -->
                    </div><!-- Fin del Form -->
                                                                }
            </div><!-- Fin del Panel Body -->
        </div>
    </div>


    <!-- Modal Diente-->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" data-backdrop="static">
        @using (Html.BeginForm("Create", "TratamientoPacientes"))
        {
            @Html.AntiForgeryToken()
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title" id="myModalLabel">Aplicar nuevo tratamiento al paciente</h4>
                    </div>
                    <div class="modal-body">
                        <div class="form-horizontal">
                            <div class="form-group">
                                <label class="col-sm-2 control-label" for="eventTitle">Tratamiento</label>
                                <div class="col-sm-10">
                                    @Html.DropDownListFor(Model => Model.Item2.IdTratamiento, new SelectList(Model.Item2.ListTratamiento, "Id", "NombreCompuesto"), "--Elija una opción--", new { @class = "form-control" })
                                    @Html.ValidationMessageFor(model => model.Item2.IdTratamiento, "", new { @class = "text-danger" })
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-sm-2 control-label" for="eventTitle">Cara Diente</label>
                                <div class="col-sm-10">
                                    @Html.DropDownListFor(Model => Model.Item2.Cara, new List<SelectListItem>

                                        {
                                        new SelectListItem{ Text="Vestibular", Value = "Vestibular" },
                                        new SelectListItem{ Text="Lingual", Value = "Lingual" },
                                        new SelectListItem{ Text="Distal", Value = "Distal" },
                                        new SelectListItem{ Text="Incisal", Value = "Incisal" },
                                        new SelectListItem{ Text="Mesial", Value = "Mesial" },
                                        new SelectListItem{ Text="Oclusal", Value = "Oclusal" },
                                        new SelectListItem{ Text="Mixta", Value = "Mixta" },
                                        new SelectListItem{ Text="Dentadura Completa", Value = "Dentadura Completa" },


                                        }, "--Elija una opción--", new { @class = "form-control" })

                                    @Html.ValidationMessageFor(model => model.Item2.Cara, "", new { @class = "text-danger" })
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-sm-2 control-label" for="eventTitle">Detalles</label>
                                <div class="col-sm-10">
                                    @Html.EditorFor(model => Model.Item2.Observaciones, new { htmlAttributes = new { @class = "form-control text-area" } })
                                </div>
                            </div>
                            @if (TempData["AgregoTratamiento"] != null && TempData["AgregoTratamiento"].ToString().Equals("true"))
                            {
                                @Html.HiddenFor(model => Model.Item2.IdDiente, new { id = "IdDiente" })
                                @Html.HiddenFor(model => Model.Item2.IdPaciente, new { id = "IdPaciente" })
                                @Html.HiddenFor(model => Model.Item2.FechaTratamiento, new { id = "FechaTratamiento", @Value = DateTime.Now })
                            }
                            else
                            {
                                @Html.HiddenFor(model => model.Item2.IdDiente, new { id = "IdDiente" })
                                @Html.HiddenFor(model => model.Item2.IdPaciente, new { id = "IdPaciente" })
                                @Html.HiddenFor(model => model.Item2.FechaTratamiento, new { id = "FechaTratamiento", @Value = DateTime.Now })

                            }

                        </div><!-- Fin del form -->
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-danger" data-dismiss="modal">Cerrar</button>
                        <button class="btn btn-warning" id="btnVerTratamiento" href="#tab5default" onclick="return FiltrarTratamientoDiente(this)" data-dismiss="modal" data-toggle="tab">Ver tratamientos aplicados al diente</button>
                        <input type="submit" value="Aplicar tratamiento" class="btn btn-primary" />
                    </div>
                </div>
            </div>
        }


    </div>
    <!-- Fin del Modal -->
    <!-- Modal Detalle Factura-->
    <div class="modal fade" id="verFactura" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" data-keyboard="false" data-backdrop="static">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">Detalle de Factura</h4>
                </div>
                <div class="modal-body custom_1">
                    <div class="form-horizontal">

                        <div class="col-md-12 table table-responsive">
                            <table class="table" id="PartialViewTratamientoPacienteFactura">
  

                            </table>
                            <div class="clearfix"></div>
                        </div>

                    </div><!-- Fin del form -->
                </div>
                <div class="modal-footer">              
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>

    </div>
    <!-- Fin del Modal -->
    <!-- Modal  Facturar-->
    <div class="modal fade" id="Facturar" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" data-backdrop="static">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">Facturar</h4>
                </div>
                <div class="modal-body custom_2">
                    <div class="form-horizontal">

                        <div class="col-md-12 table table-responsive">
                            <table class="table" id="PartialViewFacturar"></table>
                            @*<label for="number" id="=lblMontoAdicional"></label>
                                <input type="number" id="txtMontoAdicional" value="0.00" class="form-control" />*@
                            <div class="clearfix"></div>
                        </div>

                    </div><!-- Fin del form -->
                </div>
                <div class="modal-footer">
                    <button class="btn btn-success" type="button" value='@Model.Item1.id' onclick="return buttonClickCerrarFactura(this)">Facturar</button>
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Cancelar</button>
                </div>
            </div>
        </div>

    </div>
    <!-- Fin del Modal -->

    <div class="modal fade" id="DetalleAbonosPorFactura" tabindex="-1" role="dialog" aria-labelledby="DetalleAbonosPorFacturaLabel" data-keyboard="false" data-backdrop="static">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="DetalleAbonosPorFacturaLabel">Detalle abonos por factura</h4>
                </div>
                <div class="modal-body custom_6">

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>

    </div>

    <!-- Modal  Abonar-->
    <div class="modal fade" id="AbonarFactura" tabindex="-1" role="dialog" aria-labelledby="AbonarFacturaLabel" data-backdrop="static">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">Aplicar abono</h4>
                </div>
                <div class="modal-body custom_4">
                    <div id="spinner">
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-success" id="Abonar" type="button" disabled="disabled" onclick="return buttonClickAplicarAbonoFactura(this)">Abonar</button>
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Cancelar</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Fin del Modal -->
    <!-- Modal  Detalle Abono-->
    <div class="modal fade" id="DetalleAbono" data-keyboard="false" role="dialog" aria-labelledby="DetalleAbonoLabel" data-backdrop="static">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    @*<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>*@
                    <h4 class="modal-title" id="DetalleAbonoLabel">Detalle de abono</h4>
                </div>
                <div class="modal-body custom_5">
                    <div id="spinner">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="cerrarModalDetalleAbono" onclick="return buttonClickCerrarModalDetalleAbono(this)">Cerrar</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Fin del Modal -->
    <!-- Modal Cierre Factura -->
    <div class="modal fade" id="DetalleCierreFactura" tabindex="-1" role="dialog" aria-labelledby="DetalleCierreFacturaLabel" data-backdrop="static">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="DetalleCierreFacturaLabel">Detalle Cierre Factura</h4>
                </div>
                <div class="modal-body custom_3">
                    <div class="form-horizontal">

                        <div class="col-md-12 table table-responsive">
                            <table class="table" id="PartialViewCerrarFactura"></table>
                            <div class="clearfix"></div>
                        </div>
                    </div><!-- Fin del form -->
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-success" data-dismiss="modal">Regresar</button>
                </div>
            </div>
        </div>

    </div>
    <!-- Fin del Modal -->

</body>

@section Scripts {
    @Scripts.Render(" ~/Scripts/jquery.validate.js")
    @Scripts.Render(" ~/Scripts/jquery.validate.unobtrusive.js")
    @Scripts.Render("~/js/moment.min.js")
    @Scripts.Render("~/js/daterangepicker.js")
    @Scripts.Render("~/js/select2.min.js")

    <script src="https://cdn.jsdelivr.net/jquery.validation/1.15.0/additional-methods.min.js"></script>
    <link href="~/css/select2.min.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="~/css/daterangepicker.css" />

    @*Cambiar el tab activo*@
    <script>
        $(document).ready(function () {
            var input = $('.input-validation-error:first');

            if (input) {
                input.focus();
                return false;
            }
        });
        $('#btnNext').click(function () {
            $('.nav-tabs > .active').next('li').find('a').trigger('click');
        });

        $('#btnPrevious').click(function () {
            $('.nav-tabs > .active').prev('li').find('a').trigger('click');
        });
    </script>

}


